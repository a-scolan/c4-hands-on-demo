// --- DEPLOYMENT VIEWS ---
// Infrastructure and networking diagrams for legacy monolithic architecture

views 'Deployment' {
  
  deployment view overview {
    title 'Network Overview'
    description 'Physical datacenter deployment with network zones, VLANs, and inter-zone connectivity'
    
    include
      Prod,
      Prod.** where kind is vm
  }

  deployment view app_tier {
    title 'Application Tier'
    description 'Monolithic application instances with load balancing, failover, and data tier connections'
    
    include
      Prod.AppTier,
      Prod.AppTier.** where kind is vm,
      Prod.Dmz,
      Prod.Dmz.** where kind is vm,
      Prod.DataTier.ProdDatabaseVm,
      Prod.DataTier.ProdNfsVm,
      -> Prod.AppTier.*,
      Prod.AppTier.* ->
  }

  deployment view data_tier {
    title 'Data Tier'
    description 'PostgreSQL database cluster and NFS storage infrastructure with application dependencies'
    
    include
      Prod.DataTier,
      Prod.DataTier.** where kind is vm,
      Prod.AppTier.ProdMonolithVm01,
      Prod.AppTier.ProdMonolithVm02,
      -> Prod.DataTier.*,
      Prod.DataTier.* ->
  }

  deployment view security {
    title 'Security & Monitoring'
    description 'Monitoring infrastructure with all monitored systems'
    
    include
      Prod.SecZone,
      Prod.SecZone.** where kind is vm,
      Prod.Dmz,
      Prod.Dmz.** where kind is vm,
      Prod.AppTier,
      Prod.AppTier.** where kind is vm,
      Prod.DataTier,
      Prod.DataTier.** where kind is vm,
      -> Prod.SecZone.*,
      Prod.SecZone.* ->
  }

  deployment view backup_recovery {
    title 'Backup & Disaster Recovery'
    description 'Backup infrastructure with all protected data systems'
    
    include
      Prod.InfraZone,
      Prod.InfraZone.** where kind is vm,
      Prod.DataTier,
      Prod.DataTier.** where kind is vm,
      -> Prod.InfraZone.*,
      Prod.InfraZone.* ->
  }

  deployment view cicd {
    title 'Pipeline & Deployments'
    description 'Continuous integration, build, and deployment pipeline infrastructure and how it deploys to production services'
    
    include
      Cicd,
      Cicd.** where kind is vm,
      Prod.** where tag is #Deployment,
      -> Cicd.**,
      Cicd.** ->
  }
}
